# Enhanced Revenue Leakage Detection Dashboard

This enhanced dashboard provides improved visualization and interaction with Indian numeric formatting for the Revenue Leakage Detection System.

## Features

### Indian Numeric Formatting
- All currency values displayed in Indian Rupees (₹) with proper Indian numbering system
- Values formatted with commas in the Indian style (e.g., ₹1,23,45,678.90)
- Short formats using Indian units (L for Lakhs, Cr for Crores)

### Interactive Dashboard Elements
- **Enhanced Visualizations**: Toggle between chart types (bar, pie, doughnut)
- **Data Filtering**: Filter detections by type, severity, customer, and date range
- **Export Functionality**: Export data tables for further analysis
- **Real-time Updates**: Automatic refresh of metrics every 30 seconds
- **Responsive Design**: Works on desktop and mobile devices

### Key Metrics Display
- **Total Detections**: Number of revenue leakage cases detected
- **Estimated Loss**: Total financial impact in Indian Rupees
- **Critical Issues**: High-priority cases requiring immediate attention
- **Tickets Created**: Investigation tickets generated by the system

### Data Visualization
- **Revenue Leakage by Type**: Bar chart showing financial impact by leakage category
- **Cases by Severity**: Pie chart distribution of issue severities
- **Detection Timeline**: Line chart showing detection frequency over time
- **Top Financial Impacts**: Bar chart of highest-value leakage cases

## Accessing the Dashboard

1. Start the web application:
   ```bash
   python3 web/app.py
   ```

2. Open your browser and navigate to:
   - Main Dashboard: `http://localhost:8000`
   - Enhanced Dashboard: `http://localhost:8000/enhanced`

## Using the Dashboard

### Navigation
- Use the sidebar to switch between different views
- The top navigation bar provides quick access to key sections

### Quick Actions
- **Run Full Analysis**: Trigger a new revenue leakage detection analysis
- **Generate Sample Data**: Create test data for demonstration
- **View All Tickets**: Access the complete list of investigation tickets

### Data Filters
- **Leakage Type**: Filter by category (Usage Mismatches, Incorrect Rates, etc.)
- **Severity**: Filter by priority level (Critical, High, Medium, Low)
- **Customer**: Search for specific customer IDs
- **Date Range**: Limit results to specific time periods

### Exporting Data
- Use the "Export" button on tables to download data in CSV format
- Charts can be exported using the camera icon in the plotly interface

## Technical Details

### Indian Formatting Implementation
The dashboard uses JavaScript's `toLocaleString('en-IN')` method for client-side formatting and Python's custom formatting functions for server-side rendering.

### Chart Interactivity
All charts are powered by Plotly.js, providing:
- Zoom and pan capabilities
- Hover tooltips with detailed information
- Chart type switching
- Download options for images

### Real-time Updates
The dashboard automatically refreshes key metrics every 30 seconds without requiring a page reload.

## Troubleshooting

### Dashboard Not Loading
- Ensure the web application is running (`python3 web/app.py`)
- Check that all dependencies are installed
- Verify the database contains analysis results

### Missing Data
- Run a full analysis to populate the database
- Generate sample data if no real data is available

### Formatting Issues
- Ensure your browser supports the `toLocaleString('en-IN')` method
- Check that JavaScript is enabled in your browser